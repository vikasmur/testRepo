if (self.CavalryLogger) { CavalryLogger.start_js(["aknbp"]); }

__d('ProfileBrowser',['ArbiterMixin','AsyncRequest','CSS','Input','URI','$','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.selectionLimit=l.selectionLimit;this.hubBehaviors=l.hubBehaviors;this.hubsData=l.hubsData;this.typeaheadDataSources=l.typeaheadDataSources;this.listView=k.listView;this.selector=k.selector;this.typeahead=k.typeahead;this.hubs=k.hubsTypeahead;this.initialize(l);this.target=this.listView.getActiveList();this.subscribeListView();this.selector&&this.subscribeSelector();this.typeahead&&this.subscribeTypeahead();this.hubs&&this.subscribeHubs();}j.prototype.initialize=function(k){'use strict';};j.prototype.subscribeListView=function(){'use strict';this.listView.subscribe('clickedCheckable',function(k,l){this.listView.toggleCheckableItem(l.item,!c('CSS').hasClass(l.item,'selectedCheckable'));}.bind(this));};j.prototype.subscribeSelector=function(){'use strict';var k=this.typeahead&&this.typeahead.getCore();this.selector.subscribe('changeTarget',function(l,m){if(k){c('CSS').conditionShow(this.typeahead.getElement(),m.showtypeahead);k.getValue()&&k.reset();m.showtypeahead&&k.getElement().focus();}this.target=c('$')(m.target);m.isprimer&&this.listView.setLoadingState(true);this.listView.swapList(this.target);if(this.typeaheadDataSources&&this.typeaheadDataSources[m.label])this.typeahead.swapData(this.typeaheadDataSources[m.label]);this.hubs&&c('CSS').conditionShow(this.hubs.getElement(),m.hubs);}.bind(this));this.selector.subscribe('changeHub',function(l,m){var n=this.hubs.getCore(),o=n.getElement();this.hubs.init(this.hubBehaviors);this.hubs.swapData(this.hubsData[m.value]);n.reset();c('Input').setPlaceholder(o,m.placeholder);o.focus();this.hubendpoint=new (c('URI'))(m.endpoint);}.bind(this));};j.prototype.subscribeTypeahead=function(){'use strict';this.typeahead.subscribe('render',function(){var k=this.typeahead.getCore().getValue()?this.typeahead.getView().element:this.target;this.listView.swapList(k);}.bind(this));this.typeahead.subscribe('reset',function(){this.listView.swapList(this.target);}.bind(this));this.typeahead.subscribe('loading',function(k,l){c('CSS').conditionClass(this.typeahead.getElement(),'loading',l.loading);}.bind(this));};j.prototype.subscribeHubs=function(){'use strict';this.hubs.subscribe('select',function(k,l){this.hubendpoint.addQueryData({node:l.selected.uid,pagetext:l.selected.text,offset:0,target:this.target.id});c('CSS').addClass(this.hubs.getElement(),'hubsLoading');new (c('AsyncRequest'))(this.hubendpoint).setReadOnly(true).setMethod('POST').setRelativeTo(this.selector.getSelectedAnchor()).setHandler(function(){c('CSS').removeClass(this.hubs.getElement(),'hubsLoading');}.bind(this)).send();}.bind(this));};j.prototype.getSelectionLimit=function(){'use strict';return this.selectionLimit;};f.exports=j;},null);
__d('ProfileBrowserListView',['ArbiterMixin','CSS','DOM','Event','Parent','Scroll','Vector','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=800;h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function k(l,m,n){'use strict';i.constructor.call(this);this._root=l;this._activeList=m;this._windowTrigger=n;c('Event').listen(l,'click',this._handleClick.bind(this));}k.prototype.resetScroll=function(){'use strict';this._scroll&&this._scroll.remove();this._listenForScroll();};k.prototype.toggleCheckableItem=function(l,m){'use strict';var n=c('DOM').find(l,'input.checkbox');n.checked=m;c('CSS').conditionClass(l,'selectedCheckable',m);var o=l.nextSibling||l.previousSibling;o&&c('CSS').addClass(o,'sib')&&c('CSS').removeClass(o,'sib');};k.prototype.setLoadingState=function(l){'use strict';c('CSS').conditionClass(this._root,'showListviewLoading',l);};k.prototype.swapList=function(l){'use strict';c('CSS').addClass(this._activeList,'hiddenList');this._activeList=l;c('CSS').show(this._activeList);c('CSS').removeClass(this._activeList,'hiddenList');};k.prototype.getRoot=function(){'use strict';return this._root;};k.prototype.getActiveList=function(){'use strict';return this._activeList;};k.prototype.setActiveList=function(l){'use strict';this._activeList=l;return this;};k.prototype._handleClick=function(event){'use strict';var l=event.getTarget(),m=c('Parent').byClass(l,'checkableListItem');if(!m)return;var n=c('Parent').byClass(l,'anchor');if(!n&&c('Parent').byTag(l,'a')){this.inform('clickedProfile',{item:m});return;}if(!c('CSS').hasClass(m,'disabledCheckable')){n&&event.prevent();this.inform('clickedCheckable',{item:m});event.stop();}};k.prototype._listenForScroll=function(){'use strict';if(this._windowTrigger){this._rootHeight=c('Vector').getElementDimensions(this._root).y;if(this._rootHeight)this._scroll=c('Event').listen(window,'scroll',this._handleWindowScroll.bind(this));}else this._scroll=c('Event').listen(this._activeList,'scroll',this._handleListScroll.bind(this));};k.prototype._handleWindowScroll=function(l){'use strict';var m=this._rootHeight-c('Vector').getScrollPosition().y;if(m<=j)this.inform('scrollTrigger');};k.prototype._handleListScroll=function(l){'use strict';var m=l.getTarget(),n=m.scrollHeight-c('Scroll').getTop(m);if(j>n)this.inform('scrollTrigger');};f.exports=k;},null);
__d('Selector',['csx','ArbiterMixin','BehaviorsMixin','Button','DOM','DOMQuery','mixin'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin'),c('BehaviorsMixin')));j=i&&i.prototype;function k(l,m,n,o,p){'use strict';j.constructor.call(this);this._popoverMenu=l;this._button=m;this._menu=n;this._input=o;this.init();p.behaviors&&this.enableBehaviors(p.behaviors);}k.prototype.init=function(){'use strict';this._menu.subscribe('change',function(l,m){this._setLabelContent(m.label);this._input.value=m.value;this.inform('change',m);}.bind(this));this._popoverMenu.getPopover().subscribe(['hide','show'],function(l){this.inform(l);}.bind(this));};k.prototype._getLabel=function(){'use strict';return c('DOMQuery').find(this._button,"span._55pe");};k.prototype._setLabelContent=function(l){'use strict';var m=this._getLabel();c('DOM').setContent(m,l);};k.prototype.getLabelContent=function(){'use strict';var l=this._getLabel();return l.firstChild;};k.prototype.setValue=function(l){'use strict';this._menu.setValue(l);};k.prototype.getValue=function(){'use strict';return this._input.value;};k.prototype.getName=function(){'use strict';return this._input.name;};k.prototype.getButton=function(){'use strict';return this._button;};k.prototype.getMenu=function(){'use strict';return this._menu;};k.prototype.enable=function(){'use strict';c('Button').setEnabled(this._button,true);this._popoverMenu.enable();};k.prototype.disable=function(){'use strict';c('Button').setEnabled(this._button,false);this._popoverMenu.disable();};f.exports=k;},null);
__d('SelectorSubmitOnChange',['Parent','submitForm'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._selector=i;}h.prototype.enable=function(){'use strict';this._subscription=this._selector.subscribe('change',this._onChange.bind(this));};h.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};h.prototype._onChange=function(){'use strict';var i=c('Parent').byTag(this._selector.getButton(),'form');i&&c('submitForm')(i);};Object.assign(h.prototype,{_subscription:null});f.exports=h;},null);