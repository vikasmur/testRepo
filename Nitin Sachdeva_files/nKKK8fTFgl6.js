/*1462288585,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["CsTus"]); }

__d('ReactComposerPeopleTaggerComponent.react',['cx','fbt','ReactComposerPeopleTaggerTokenizerToken.react','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','Grid.react','React','XUITokenizer.react','emptyFunction','CurrentUser'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPeopleTaggerComponent',propTypes:{actorID:k.string,autoFocus:k.bool,placeholder:k.string,taggerConfig:k.object,taggerData:k.array.isRequired,taggerSource:k.object.isRequired,onPeopleTagRemove:k.func,onSelect:k.func,taggerViewStyle:k.shape(c('ReactComposerTaggerViewStyles').Shape)},getDefaultProps:function(){var m=i._("Who are you with?");if(c('CurrentUser').isWorkUser())m=i._("Who do you want to tag?");return {autoFocus:true,onSelect:c('emptyFunction'),placeholder:m,taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,taggerData:[]};},_onAdd:function(m){var n=this.props.taggerData,o=m.getUniqueID(),p=n.some(function(q){return q.getUniqueID()===o;});if(p){return;}else n.push(m);this.props.onSelect&&this.props.onSelect(n);},_onRemove:function(m){var n=this.props.taggerData,o=n.indexOf(m);if(o==-1)return;n.splice(o,1);this.props.onPeopleTagRemove&&this.props.onPeopleTagRemove(m);this.props.onSelect&&this.props.onSelect(n);},render:function(){var m={};if(this.props.actorID)m[this.props.actorID]=true;return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(j,{key:'label',className:"_5esm",role:'presentation'},i._("With")),c('React').createElement(j,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({presenter:this._getPresenter(),focusedOnInit:this.props.autoFocus,excludedEntries:m,entries:this.props.taggerData,className:"_5esx _2fzs",placeholder:this.props.placeholder,searchSource:this.props.taggerSource,onAddEntryAttempt:this._onAdd,onRemoveEntryAttempt:this._onRemove},this.props)))));},_getPresenter:function(){var m=this.props.taggerConfig&&this.props.taggerConfig.presenter?this.props.taggerConfig.presenter:c('ReactComposerTaggerPresenter'),n={};n.taggerViewStyle=this.props.taggerViewStyle;n.viewProps=this.props.taggerConfig&&this.props.taggerConfig.typeaheadViewProps;return Object.assign({},m,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:n,TokenRenderer:c('ReactComposerPeopleTaggerTokenizerToken.react')});}});f.exports=l;},null);
__d('ReactShareDialogComposerActionType',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({SET_SHARE_DIALOG_TARGET:null,SET_SHARE_DIALOG_TARGET_INFO:null,SET_SHARE_DIALOG_TARGETED_PRIVACY_DATA:null,SET_SHARE_DIALOG_ATTRIBUTION:null,SET_SHARE_DIALOG_TYPE:null,SET_SHARE_TO_GROUPS_AS_PAGE:null});},null);
__d('ReactShareDialogComposerActions',['ReactComposerDispatcher','ReactShareDialogComposerActionType','ReactShareDialogComposerStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactShareDialogComposerStore');var h={setTarget:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_DIALOG_TARGET,target:j});},setTargetInfo:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_DIALOG_TARGET_INFO,targetInfo:j});},setTargetedPrivacyData:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_DIALOG_TARGETED_PRIVACY_DATA,targetedPrivacyData:j});},setAttribution:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_DIALOG_ATTRIBUTION,attribution:j});},setTypeOfShare:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_DIALOG_TYPE,shareType:j});},setShareToGroupAsPage:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactShareDialogComposerActionType').SET_SHARE_TO_GROUPS_AS_PAGE,shareToGroupsAsPage:j});}};f.exports=h;},null);
__d('ShareDialogTagSummary.react',['cx','Arbiter','AsyncRequest','immutable','Parent','ReactComponentWithPureRenderMixin','React','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=true,k=c('React').createClass({displayName:'ShareDialogTagSummary',mixins:[c('ReactComponentWithPureRenderMixin')],_ogSubscription:undefined,_socialTextRequest:undefined,propTypes:{ogObjectClick:i.func.isRequired,onTagSummaryClick:i.func.isRequired,peopleToExclude:i.instanceOf(c('immutable').Set).isRequired,placeTokenClick:i.func.isRequired,taggerData:i.instanceOf(c('immutable').Map).isRequired,withTokenClick:i.func.isRequired},getDefaultProps:function(){return {peopleToExclude:c('immutable').Set(),ogObjectClick:c('emptyFunction'),onTagSummaryClick:c('emptyFunction'),placeTokenClick:c('emptyFunction'),withTokenClick:c('emptyFunction')};},getInitialState:function(){return {socialText:null};},componentWillMount:function(){this._ogSubscription=c('Arbiter').subscribe('composer/ogIconPickerOpened',function(event,l){j=false;});this._sendSocialTextRequest(this.props);},componentWillUnmount:function(){if(this._socialTextRequest)this._socialTextRequest.abort();},componentWillReceiveProps:function(l){if(!this.props.taggerData.equals(l.taggerData))this._sendSocialTextRequest(l);},_handleSocialText:function(l){this.setState({socialText:l.getPayload().rendered});},render:function(){var l=c('joinClasses')(this.props.className,"_3qg0");return (c('React').createElement('div',{className:l,onMouseDown:this._onMouseDown,dangerouslySetInnerHTML:this.state.socialText}));},_onMouseDown:function(l){var m=l.target;if(c('Parent').byClass(m,'withToken')){this.props.withTokenClick();}else if(c('Parent').byClass(m,'placeToken')){this.props.placeTokenClick();}else if(c('Parent').byClass(m,'og_composer_object')){this.props.ogObjectClick();}else if(!(c('Parent').byClass(m,'ogPickerIcon')))this.props.onTagSummaryClick();},_sendSocialTextRequest:function(l){if(this._socialTextRequest)this._socialTextRequest.abort();var m=l.taggerData,n=m.get('people'),o=m.get('place'),p=m.get('action'),q=m.get('actionIconID'),r=m.get('object'),s=m.get('products'),t=n.filter(function(x){return !this.props.peopleToExclude.has(x.getUniqueID());}.bind(this));if(!(t&&t.length>0)&&!o&&!(p&&r)&&!(s&&s.length>0)){if(this.state.socialText)this.setState({socialText:null});return;}var u={};if(t)u.people=t.map(function(x){return x.getUniqueID();});if(o){u.place=o.getTitle();u.placeID=o.getUniqueID();}if(s)u.productIDs=s.map(function(x){return x.getUniqueID();});if(p&&r){u.actionID=p.getUniqueID();var v=r.getUniqueID(),w=r.getTitle();if(!v||v===w){u.objectStr=w;}else u.objectID=v;}if(q)u.actionIconID=q;u.iconPickerOpened=j!==true;this._socialTextRequest=new (c('AsyncRequest'))();this._socialTextRequest&&this._socialTextRequest.setURI('/ajax/metacomposer/social_text.php').setData(u).setHandler(this._handleSocialText).send();}});f.exports=k;},null);
__d('ReactShareDialogComposerStatusAttachmentFooterContainer.react',['ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ComposerNUXType','ComposerXNUX','ReactShareDialogComposerStatusAttachmentFooter.react','ReactShareDialogComposerStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactShareDialogComposerStatusAttachmentFooterContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'),c('ReactShareDialogComposerStore'))],propTypes:{showActivityNUX:h.bool},statics:{calculateState:function(j,k){var l=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').LOCATION),m=l&&l.place&&l.place.getUniqueID();return {placeID:m,target:c('ReactShareDialogComposerStore').getTarget(j),targetInfo:c('ReactShareDialogComposerStore').getTargetInfo(j)};}},getInitialState:function(){return {showActivityNUX:this.props.showActivityNUX};},componentWillMount:function(){if(this.props.showActivityNUX)setTimeout(function(){this.setState({showActivityNUX:true});}.bind(this),1000);},render:function(){return (c('React').createElement(c('ReactShareDialogComposerStatusAttachmentFooter.react'),babelHelpers['extends']({},this.props,this.state,{posting:this.props.status.type=='posting',onActivityNUXClose:this._onActivityNUXClose,onPost:this.props.onPost,onSelectActivity:this._closeTaggers,onSelectLocation:this._closeTaggers})));},_closeTaggers:function(j){if(j&&j.action&&!j.object)return;c('ReactComposerTaggerActions').selectTagger(this.context.composerID,null);},_onActivityNUXClose:function(){this.setState({showActivityNUX:false});c('ComposerXNUX').sendMarkSeenRequest(c('ComposerNUXType').SHARER_MINUTIAE_NUX);}});f.exports=i;},null);
__d('ReactShareDialogComposerStatusAttachmentContainer.react',['ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','React','ReactShareDialogComposerActions','ReactShareDialogComposerStore','ShareDialogAudienceTypes','ReactShareDialogComposerStatusAttachment.react','ShareDialogDataSources','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactShareDialogComposerStatusAttachmentContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'),c('ReactShareDialogComposerStore'))],propTypes:{activeAudience:c('ShareDialogAudienceTypes').propType,attachment:h.object,dataSources:h.instanceOf(c('ShareDialogDataSources')),onCancel:h.func,onPost:h.func,pagePrivacySelector:h.instanceOf(HTMLElement),privacySelector:h.instanceOf(HTMLElement),publicityWarning:h.object,shouldAlwaysHideAllTaggers:h.bool.isRequired,shouldHideAllButtons:h.bool.isRequired,showDoingNUX:h.bool,via:h.object},getDefaultProps:function(){return {onCancel:c('emptyFunction'),onPost:c('emptyFunction')};},statics:{beforeCalculateInitialState:function(j,k){var l=k.via;if(l&&l.name)c('ReactShareDialogComposerActions').setAttribution(j,l);},calculateState:function(j,k){var l=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').ACTIVITY);return {taggersData:c('ReactComposerTaggerStore').getTaggersData(j),attribution:c('ReactShareDialogComposerStore').getAttribution(j),actionIconID:l?l.actionIconID:null};}},render:function(){return (c('React').createElement(c('ReactShareDialogComposerStatusAttachment.react'),babelHelpers['extends']({ref:'shareBody'},this.props,this.state,{onRemoveAttribution:this._onRemoveAttribution})));},_onRemoveAttribution:function(){c('ReactShareDialogComposerActions').setAttribution(this.context.composerID,null);}});f.exports=i;},null);